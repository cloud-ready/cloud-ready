<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/README.md at 2018-09-18
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180918" />
    <meta http-equiv="Content-Language" content="en" />
    <title>spring-cloud-eureka-sidecar &#x2013; spring-cloud-eureka-sidecar</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="spring-cloud-eureka">spring-cloud-eureka</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="README.html" title="README">README</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="findbugs.html" title="FindBugs">FindBugs</a></li>
                  <li><a href="jdepend-report.html" title="JDepend">JDepend</a></li>
                  <li><a href="checkstyle.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="taglist.html" title="Tag List">Tag List</a></li>
                  <li><a href="pmd.html" title="PMD">PMD</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>spring-cloud-eureka-sidecar</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-09-18<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.1-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Parent Project</li>
    <li><a href="../index.html" title="spring-cloud-eureka"><span class="none"></span>spring-cloud-eureka</a></li>
      <li class="nav-header">DOCUMENTATION</li>
    <li class="active"><a href="#"><span class="none"></span>README</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>spring-cloud-eureka-sidecar</h1>
<p>spring-cloud-eureka-sidecar</p>
<p>Sidecar can register non-JVM applications or services on Eureka and help them to access applications or services on Eureka.</p>
<p><a class="externalLink" href="https://github.com/cloud-ready/spring-cloud-service-discovery/tree/develop/spring-cloud-eureka/spring-cloud-eureka-sidecar">Github</a> <a class="externalLink" href="https://hub.docker.com/r/cloudready/spring-cloud-eureka-server/">Docker Hub</a></p>
<div class="section">
<h2><a name="I._Features"></a>I. Features</h2>
<div class="section">
<h3><a name="a1._With_sidecar_non-JVM_applications_can_take_advantage_of_Eureka.2C_Ribbon.2C_and_Config_Server"></a>1. With sidecar non-JVM applications can take advantage of Eureka, Ribbon, and Config Server</h3>
<p>Sidecar proxy service calls through an embedded Zuul proxy that gets its route entries from Eureka. The Spring Cloud Config Server can be accessed directly through host lookup or through the Zuul Proxy.</p></div>
<div class="section">
<h3><a name="a2._The_non-JVM_application_should_implement_a_health_check_so_the_Sidecar_can_report_to_Eureka_whether_the_app_is_up_or_down"></a>2. The non-JVM application should implement a health check so the Sidecar can report to Eureka whether the app is up or down</h3></div></div>
<div class="section">
<h2><a name="II._Usage"></a>II. Usage</h2>
<p>Install <a class="externalLink" href="https://www.docker.com/community-edition">Docker</a> on your host.</p>

<div>
<div>
<pre class="source">git clone https://github.com/cloud-ready/spring-cloud-service-discovery.git
cd spring-cloud-service-discovery/spring-cloud-eureka/spring-cloud-eureka-sidecar
# export some environments, see following document
docker-compose up
# or run in background
docker-compose up -d
</pre></div></div>

<div class="section">
<h3><a name="a1._There_are_4_mandatory_environment_variables_need_to_set_before_sidecar_boot-up."></a>1. There are 4 mandatory environment variables need to set before sidecar boot-up.</h3>
<ul>

<li>EUREKA_CLIENT_SERVICEURL_DEFAULTZONE</li>
</ul>
<blockquote>

<p>Eureka URLs, comma split if there are multiple Eureka servers. default value is &#x2018;<a class="externalLink" href="http://user:user_pass@eureka-standalone:8761/eureka/">http://user:user_pass@eureka-standalone:8761/eureka/</a>&#x2019;.</p>
</blockquote>
<ul>

<li>SIDECAR_HEALTHURI</li>
</ul>
<blockquote>

<p>health check endpoint on no-JVM application (service). default value is &#x2018;/health&#x2019;.</p>
</blockquote>
<p>The &#x2018;SIDECAR_HEALTHURI&#x2019; is a URI accessible on the non-JVM application that mimics a Spring Boot health indicator. It should return a JSON document that resembles the following:</p>

<div>
<div>
<pre class="source">{ &quot;status&quot;:&quot;UP&quot;}
</pre></div></div>

<p>There are 3 possible status &#x2018;UP&#x2019;, &#x2018;DOWN&#x2019;, &#x2018;OUT_OF_SERVICE&#x2019;. The simple implementation can just return &#x2018;UP&#x2019; while process is running. Status &#x2018;DOWN&#x2019; and &#x2018;OUT_OF_SERVICE&#x2019; are needed only when you want to support more advanced routing policy.</p>
<ul>

<li>SIDECAR_PORT</li>
</ul>
<blockquote>

<p>The port on which the non-JVM application listens. default value is &#x2018;3000&#x2019;.</p>
</blockquote>
<p>Sidecar needs &#x2018;SIDECAR_PORT&#x2019; to register the non-JVM application with Eureka.</p>
<ul>

<li>SPRING_APPLICATION_NAME</li>
</ul>
<blockquote>

<p>Application or service name of the non-JVM application or service</p>
</blockquote></div>
<div class="section">
<h3><a name="a2._Optional_environment_variables"></a>2. Optional environment variables</h3>
<ul>

<li>SIDECAR_HOMEPAGEURI</li>
</ul>
<blockquote>

<p>Homepage of the non-JVM application or service - SIDECAR_HOSTNAME Hostname of the non-JVM application or service - SIDECAR_IPADDRESS Ip address of the non-JVM application or service</p>
</blockquote>
<p>Optional SIDECAR_* variables are needed only when sidecar can not properly register the application with default values and there are issues on service access.</p>
<ul>

<li>SERVER_PORT</li>
</ul>
<blockquote>

<p>The port sidcar listens. Access services on Eureka through this port. default value is &#x2018;5678&#x2019;.</p>
</blockquote>
<p>The API for the <tt>DiscoveryClient.getInstances()</tt> method is <tt>/hosts/{serviceId}</tt> <tt>http://localhost:5678/hosts/{serviceId}</tt> if the sidecar is on port 5678.</p>
<p>The Zuul proxy automatically adds routes for each service known in Eureka to /{serviceId}, so the customers service is available at /customers. The non-JVM application can access the customer service at <tt>http://localhost:5678/customers</tt> (assuming the sidecar is listening on port 5678).</p></div></div>
<div class="section">
<h2><a name="III."></a>III.</h2>
<p>Run this sidecar on the same host as the non-JVM application. If sidecar not on the same host as the non-JVM application, you need to set environment variables.</p>
<ul>

<li>SIDECAR_HEALTHURI</li>
<li>SIDECAR_HOMEPAGEURI</li>
<li>SIDECAR_HOSTNAME</li>
<li>SIDECAR_IPADDRESS</li>
</ul></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2018.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
