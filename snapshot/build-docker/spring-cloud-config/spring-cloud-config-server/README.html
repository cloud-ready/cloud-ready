<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/README.md at 2018-09-14
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180914" />
    <meta http-equiv="Content-Language" content="en" />
    <title>spring-cloud-config-server &#x2013; spring-cloud-config-server</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="spring-cloud-config">spring-cloud-config</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="README.html" title="README">README</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="findbugs.html" title="FindBugs">FindBugs</a></li>
                  <li><a href="jdepend-report.html" title="JDepend">JDepend</a></li>
                  <li><a href="checkstyle.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
                  <li><a href="taglist.html" title="Tag List">Tag List</a></li>
                  <li><a href="pmd.html" title="PMD">PMD</a></li>
                  <li><a href="jacoco/index.html" title="JaCoCo">JaCoCo</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>spring-cloud-config-server</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-09-14<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.1-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Parent Project</li>
    <li><a href="../index.html" title="spring-cloud-config"><span class="none"></span>spring-cloud-config</a></li>
      <li class="nav-header">DOCUMENTATION</li>
    <li class="active"><a href="#"><span class="none"></span>README</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>spring-cloud-config-server</h1>
<p>spring-cloud-config-server</p>
<p><a class="externalLink" href="https://travis-ci.org/cloud-ready/spring-cloud-config"><img src="https://travis-ci.org/cloud-ready/spring-cloud-config.svg?branch=master" alt="Build Status" /></a></p>
<div class="section">
<h2><a name="Local_demostration"></a>Local demostration</h2>
<ol style="list-style-type: decimal">

<li>

<p>Create a local docker network <tt>docker network create --driver=bridge --ipv6 --ipam-driver=default --subnet=172.16.238.0/24 --subnet=2001:3984:3989::/64 local-network</tt></p>
</li>
<li>

<p>Start up <tt>docker-compose up</tt></p>
</li>
<li>

<p>Get application config info (HTTP access)</p>
</li>
</ol>
<blockquote>

<p>default admin username/password is <tt>admin/admin_pass</tt></p>
</blockquote>
<p>config repositories for demo (default) instance of config-server: - <a class="externalLink" href="https://github.com/spring-cloud-config-server/health-check-config">health-check</a></p>
<blockquote>

<p>repo for config-server&#x2019;s health check - <a class="externalLink" href="https://github.com/spring-cloud-config-server/demo-app-config">demo-app</a> application config repo, default branch (label) is develop - <a class="externalLink" href="https://github.com/spring-cloud-config-server/demo-app-common-config">demo-app-common</a> parent config repo of demo-app, default branch (label) is develop</p>
</blockquote>
<p>config-server supports following url patterns ({profiles} is a comma splitted list, {label} is git ref name)</p>
<ul>

<li>/{application}/{profiles}[/{label}]</li>
</ul>

<div>
<div>
<pre class="source">curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app/production.env,ut.env/develop
curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app/production.env,ut.env
</pre></div></div>

<p>/{application}-{profiles}.json /{label}/{application}-{profiles}.json</p>

<div>
<div>
<pre class="source">curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app-production.env,ut.env.json
curl -s -X GET -u admin:admin_pass http://config-server:8888/config/develop/demo-app-production.env,ut.env.json
</pre></div></div>

<p>/{application}-{profiles}.properties /{label}/{application}-{profiles}.properties</p>

<div>
<div>
<pre class="source">curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app-production.env,ut.env.properties
curl -s -X GET -u admin:admin_pass http://config-server:8888/config/develop/demo-app-production.env,ut.env.properties
</pre></div></div>

<p>/{application}-{profiles}.yml /{application}-{profiles}.yaml /{label}/{application}-{profiles}.yml /{label}/{application}-{profiles}.yaml</p>

<div>
<div>
<pre class="source">curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app-production.env,ut.env.yml
curl -s -X GET -u admin:admin_pass http://config-server:8888/config/demo-app-production.env,ut.env.yaml

curl -s -X GET -u admin:admin_pass http://config-server:8888/config/develop/demo-app-production.env,ut.env.yml
curl -s -X GET -u admin:admin_pass http://config-server:8888/config/develop/demo-app-production.env,ut.env.yaml
</pre></div></div>

<ol style="list-style-type: decimal">

<li>Encrypt/Decrypt string</li>
</ol>
<p>4.1. Encrypt Any one can access <tt>/encrypt</tt> endpoint</p>

<div>
<div>
<pre class="source">curl -s -X POST http://config-server:8888/config/encrypt -H 'Accept: application/json' -d mysecret
</pre></div></div>

<p>4.2. Decrypt Only admin can access <tt>/decrypt</tt> decrypt</p>

<div>
<div>
<pre class="source">curl -s -X POST -u admin:admin_pass http://config-server:8888/config/decrypt -H 'Accept: application/json' -d $(curl -s -X POST http://config-server:8888/config/encrypt -H 'Accept: application/json' -d mysecret)
</pre></div></div>

<ol style="list-style-type: decimal">

<li>Runtime refresh (update) application&#x2019;s config</li>
</ol>
<p>5.1. git push -&gt; call application instances&#x2019;s <tt>/refresh</tt> manually</p>
<p>Call application&#x2019;s <tt>/refresh</tt> endpoint after push new config files onto git service Only beans that annotated with <tt>@RefreshScope</tt> annotation will be refreshed.</p>

<div>
<div>
<pre class="source"># contents in '[]' is ignorable, depends on application instance's config
curl -s -X GET [-u user:password] http[s]://host[:port][/server.servlet.context-path][/management.endpoints.web.base-path]/refresh
</pre></div></div>

<p>5.2. git push hook on git service -&gt; config-server&#x2019;s <tt>monitor</tt> endpoint -&gt; cloud-bus (MQ) -&gt; application instances automatically</p>
<p>5.2.1. Setup hook for gitlab repositories Enable <tt>Push events</tt>, turn <tt>SSL verification</tt> off. URL like <tt>http[s]://hook_user_name:hook_user_password@config-server-host:8888/config/monitor</tt>.</p>
<p>Enable hook data extractor in config-server&#x2019;s application.yml.</p>

<div>
<div>
<pre class="source">spring.cloud:
  config:
    server:
      git:
      monitor:
        gitlabrepo.enabled: ${SPRING_CLOUD_CONFIG_SERVER_MONITOR_GITLABREPO_ENABLED:false}
</pre></div></div>

<p>TODO doc</p>
<ol style="list-style-type: decimal">

<li>Other endpoints</li>
</ol>
<ul>

<li>

<p><a class="externalLink" href="http://config-server:8888/">http://config-server:8888/</a></p>
</li>
<li>

<p><a class="externalLink" href="http://config-server:8888/config/deployKeyPublic">http://config-server:8888/config/deployKeyPublic</a></p>
</li>
<li>

<p><a class="externalLink" href="http://config-server:8888/manage/info">http://config-server:8888/manage/info</a></p>
</li>
<li><a class="externalLink" href="http://config-server:8888/manage/health">http://config-server:8888/manage/health</a></li>
</ul></div>
<div class="section">
<h2><a name="Extended_features"></a>Extended features</h2>
<p>This config-server extends spring-cloud&#x2019;s default config-server.</p>
<ul>

<li>Custom Feature 1. Custom parent git config repository</li>
</ul>
<blockquote>

<p>Users can ref a parent config repository in their own config file.</p>
</blockquote>
<p>Note: + It is recommended to use a encrypted <tt>spring.cloud.config.parent.password</tt> in config file. + Do not use a plain text parent password or password encrypted by  <tt>/encrypt</tt> endpoint.</p>
<blockquote>

<p>Anyone who copied it will get privilege to access parent config repository. + You can use different <tt>spring.cloud.config.parent.password</tt> in auth-label-develop, auth-profile-staging.env, auth-profile-production.env configs to protect sensible properties. If you put password in different environment profiles, you need to provide the application (user) name and environment profile name (where the password stored), join them with a &#x2018;@&#x2019; as username. i.e. curl -X GET -u <a class="externalLink" href="mailto:application@staging.env">application@staging.env</a> <a class="externalLink" href="http://config-server:8888/config/application/staging.env">http://config-server:8888/config/application/staging.env</a> + Use <tt>/encryptParentPassword</tt> to generate a encrypted and signed parent password (token), only admin can do this.</p>

<div>
<div>
<pre class="source">curl -s -X POST http://config-server:8888/config/encryptParentPassword \
-H &quot;Content-Type: application/x-www-form-urlencoded&quot; \
-H &quot;Accept: application/json&quot; \
-u admin:admin_pass \
-d &quot;application=demo-app&amp;parentApplication=demo-app-common&amp;parentPassword=demo-app-common_pass&quot;
</pre></div></div>
</blockquote>
<p>user&#x2019;s application.yml example:</p>

<div>
<div>
<pre class="source">spring.cloud.config.parent:
  application: demo-app-common
  label: '{label}' # must quote, if not the 'spring.cloud.config.parent.label: {label}' will becomes 'spring.cloud.config.parent.label.label: ', tested on spring-boot:1.5.12.RELEASE
  #password: demo-app-common_pass
  password: '{token}eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbmNyeXB0ZWQiOiJBUUJTNkhOdUkrRU5vZVgrM0N0Y0p1OTFPYUREbmhSWS8xOERRYmpUbjFkWncxbzZqODFacktxc05ZUXhvNW9XRmp6Ung0RWxUOEVUcmxodTRnVzh4Z3R0L21jaEc4bEZkMkFMcVU3aEpkQmlDT0hZdVhBYThmZ1NScDNKUUdvUmVxeTVJYVJEdHVOcWNLQlJRRUlYYi9PRzhHR2xEaHQyY3UrMFFEdTNoeEhFdVZOenJRaGYvV2RlM2lTUjlZU3ovSmp6K2RMSGhIdEJtbEVEZXExKzZKaERpVE1yYWdoNFk5WUxPTmlkVFRtUG1hdUtreUxqYnJkUFNWUEtKdFN1dTdyem9NT3Y2cnp2dEpwZTJQYTZJai9ob1pDNHcxQUd2TmNYZmNIQlJEeHZucFZWRGJLWTRYKzUxUXhSMmUxL3hJSWtrRXR0L251Y1hmSlJWSkE3NEdiTDY5dUU2WGFTODc3dmhwdEdPa1lDWTkwWFZhSXVQOEhsK2ZmOGc1TlJWSjJOZGNnS3FEOEN4VmNCTzBXVHQxZjJIVDZ3TDlGZ1R4anI1QnNUSHBVSmZZcHBEdHVNS094VFhqV1Z4Tk93RUFDbC9GdnFpQXNNYk1yYUp6TjFKUGNNb2U1bThjQjR5T2NUVzBKa3F0dUpSWGExNmViVFBCbHlxcGpOYjhxYXZxREIwdlRVWFBEWVB0Kzc0MHBYYUNsYmVBVGRTZDR2cGp5MGtCcXRMcFF2TVZ5RzJDdThuSndzYjVpZmxlbVJlR0tnV2VFTk9weW83b2p6dlRERk1DZ1djd0krR0FUSXNBR2ZMT0dJSFZablNSZ1dqUHRMdlpIZk9ZdmlWckgrYmdvPSIsImlzcyI6ImNvbmZpZy1zZXJ2ZXIiLCJleHAiOjE2ODU5MDEwNzJ9.u9n89MGKXnmkiIGsctmpcUWEgoB6CFCpIMCJX32cmdg'
</pre></div></div>

<p>Test parent password</p>

<div>
<div>
<pre class="source">curl -s -X GET -u demo-app:demo-app_pass http://config-server:8888/config/demo-app/production.env,ut.env/develop
curl -s -X GET -u demo-app:demo-app_pass http://config-server:8888/config/demo-app/production.env,ut.env/master
</pre></div></div>

<ul>

<li>Custom Feature 2. Password pre git config repository</li>
</ul>
<blockquote>

<p>Users can specify a <tt>spring.cloud.config.password: &lt;password&gt;</tt> in config file to protect their config file url endpoints.</p>
</blockquote>
<p>Note: + config-server support load <tt>spring.cloud.config.password</tt> form environment profiles or default profile. + You can use different <tt>spring.cloud.config.password</tt> in auth-label-develop, auth-profile-staging.env, auth-profile-production.env configs to protect sensible properties.</p>
<blockquote>

<p>If you put password in different environment profiles, you need to provide the application (user) name and environment profile name (where the password stored), join them with a &#x2018;@&#x2019; as username. i.e. curl -X GET -u <a class="externalLink" href="mailto:application@staging.env">application@staging.env</a> <a class="externalLink" href="http://config-server:8888/config/application/staging.env">http://config-server:8888/config/application/staging.env</a> + config-server will use parent&#x2019;s <tt>spring.cloud.config.password</tt> if child&#x2019;s <tt>spring.cloud.config.password</tt> absent and it has a parent. + It is recommended to use a encrypted <tt>spring.cloud.config.password</tt> in config file.</p>
</blockquote>
<p>user&#x2019;s application.yml example</p>

<div>
<div>
<pre class="source">spring.cloud.config.password: demo-app_pass
</pre></div></div>

<ul>

<li>Custom Feature 3. Git deploy key in file or in classpath</li>
</ul>
<blockquote>

<p><tt>spring.cloud.config.git.deploy-key: classpath:&lt;filename&gt; or file:&lt;filename&gt;</tt></p>
</blockquote>
<p>The property in application.yml specifies the private key, public key is privateKey + &#x201c;.pub&#x201d;.</p>
<p>config-server&#x2019;s application.yml example:</p>

<div>
<div>
<pre class="source">spring.cloud:
  config:
      git:
        deploy-key: ${SPRING_CLOUD_CONFIG_SERVER_GIT_DEPLOYKEY:classpath:default-deploy_key}
</pre></div></div>

<ul>

<li>Custom Feature 4. Security on web-hook endpoint</li>
</ul>
<blockquote>

<p>Use a pair of different username and password than admin&#x2019;s.</p>
</blockquote>
<p>config-server&#x2019;s application.yml example:</p>

<div>
<div>
<pre class="source">security:
  basic.enabled: ${SPRING_SECURITY_ENABLED:true}
  hook:
    name: ${SPRING_SECURITY_HOOK_NAME:hook}
    password: ${SPRING_SECURITY_HOOK_PASSWORD:hook_pass}
</pre></div></div>
</div>
<div class="section">
<h2><a name="Deploy_config-server"></a>Deploy config-server</h2>
<ol style="list-style-type: decimal">

<li>Requirements for config repositories</li>
</ol>
<p>1.1. All config repositories should under same group. i.e. like <tt>spring-cloud-config-server</tt> in this doc</p>
<blockquote>

<p>on gitlab, on github it is user or organization</p>
</blockquote>
<p>1.2. All config repositories must use same name pattern</p>
<blockquote>

<p>{application}-config, {application} is same as application&#x2019;s <tt>spring.application.name</tt> value</p>
</blockquote>
<p>Parent config repository follow the same rule no matter there are or are no application instances for parent &#x2018;{application}&#x2019;.</p>
<p>1.3. There should be a <tt>health-check-config</tt> repository for config-server health check</p>
<p>1.4. All repositories can be accessed with same deploy key</p>
<blockquote>

<p>Github can&#x2019;t meet this requirement, but it is ok, because repositories on github are publicly available</p>
</blockquote>
<p>Do not use the default deploy key comes with local demostration.</p>
<blockquote>

<p>Default one is &#x2018;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJexpGshox4d2mRhYIjOjxlAmcF9k9fKzlr2ylKS32LwMrVeKY+XyV06YvX0FE0uwj3DSp2Vai2e8kEylRDhQmuV1ZjjA08P9/j9SacFuzY8TfncdUwsQ3wxmBjmlpQoODUad7v0ld0r1AfttqbfGJr8L5gPzxvoA96K+6PkYyzUwbStJiW0ruNEVOb5LgN/v90LWMorwXj2Y/fu+i5OWp+iCTrQ6ltC6xQ/f3MyRMbfUxW3cXNp9UkdVkFDJ4Le/5poim5yPi6d2vjG8z7h5hM7M+H7q72hVoH9Rx0yzp55jOSRMXDGU138pK6HQFU/mCw9yaT0OwGK5IdvaX+ryd <a class="externalLink" href="mailto:configserver@home1.cn">configserver@home1.cn</a>&#x2019;</p>
</blockquote>
<p>Generate a new deploy key for your staging or production environment.</p>

<div>
<div>
<pre class="source">ssh-keygen -t rsa -b 2048 -f production-deploy_key -q -N &quot;&quot; -C &quot;config-server@your_domain&quot;
</pre></div></div>

<ol style="list-style-type: decimal">

<li>Encrypt key and keystore</li>
</ol>
<p>2.1. Symmetric encryption Easy but not safe enough, not recommended.</p>
<p>config-server&#x2019;s bootstrap.yml or application.yml</p>

<div>
<div>
<pre class="source">encrypt:
  key: changeme
</pre></div></div>

<p>2.2. Asymmetric encryption Much more safer than symmetric encryption, recommended.</p>
<p>If you are using java8 or lower versions, you need to download &#x2018;(JCE)Unlimited Strength Jurisdiction Policy Files&#x2019; (2 jars) from java official site, then put them into <tt>jre/lib/security</tt>.</p>
<p>Note: + Create separate keystore and use different password in develop, staging and production environment. + config-server can not read keystore encoded by <tt>pkcs12</tt> format, <tt>jks</tt> is supported, so do not use <tt>keytool</tt>&#x2019;s <tt>-deststoretype pkcs12</tt> option</p>
<p>config-server&#x2019;s bootstrap.yml or application.yml</p>

<div>
<div>
<pre class="source">encrypt:
  key-store:
    alias: ${ENCRYPT_KEYSTORE_ALIAS:key_alias}
    secret: ${ENCRYPT_KEYSTORE_SECRET:key_pass}
    password: ${ENCRYPT_KEYSTORE_PASSWORD:store_pass}
    location: ${ENCRYPT_KEYSTORE_LOCATION:classpath:default-keystore.jks}
</pre></div></div>

<p>2.2.1. Build-in default-keystore.jks is for non-production environments. It was generated by a command like this:</p>

<div>
<div>
<pre class="source">keytool -genkeypair \
-alias key_alias \
-deststoretype jks \
-dname &quot;CN=home1,OU=home1,O=home1,L=Beijing,S=Beijing,C=CN&quot; \
-keyalg RSA -keysize 2048 -validity 3650 \
-keypass key_pass \ 
-storepass store_pass \
-keystore default-keystore.jks
</pre></div></div>

<p>To list key pairs in jks file, run <tt>keytool -list -storepass store_pass -keystore src/main/resources/default-keystore.jks</tt>.</p>
<p>2.2.2. Generate a keystore and keys for production environment.</p>
<p>Random password is more secure.</p>
<p>Example for dname: <tt>CN=jsvede.bea.com, OU=DRE, O=BEA, L=Denver, ST=Colorado, C=US</tt></p>

<div>
<div>
<pre class="source">DNAME=&quot;CN=your_cn,OU=your_ou,O=your_o,L=your_l,S=your_s,C=your_c&quot;
ENCRYPT_KEYSTORE_PASSWORD=&quot;$(openssl rand -base64 32)&quot;
ENCRYPT_KEYSTORE_SECRET=&quot;$(echo `&lt;/dev/urandom tr -dc A-Za-z0-9 | head -c16`)&quot;
keytool -genkeypair \
-alias config-key-default \
-deststoretype jks \
-dname &quot;${DNAME}&quot; \
-keyalg RSA -keysize 2048 -validity 3650 \
-keypass ${ENCRYPT_KEYSTORE_SECRET} \
-storepass ${ENCRYPT_KEYSTORE_PASSWORD} \
-keystore production-keystore.jks
</pre></div></div>

<p>Change the value of option <tt>alias</tt> and <tt>keypass</tt> then run <tt>keytool</tt> again can create and save multiple key pairs into same jks file.<br />
To list key pairs in jks file, run <tt>keytool -list -storepass ${ENCRYPT_KEYSTORE_PASSWORD} -keystore production-keystore.jks</tt>.</p></div>
<div class="section">
<h2><a name="Appendix"></a>Appendix</h2>
<p>A. Details of git repository access</p>
<p>org.springframework.cloud.config.server.environment.AbstractScmEnvironmentRepository.getLocations org.springframework.cloud.config.server.environment.JGitEnvironmentRepository.createGitClient, copyRepository, cloneToBasedir, configureCommand</p>
<p>B. <a class="externalLink" href="https://cloud.spring.io/spring-cloud-static/Dalston.SR4/multi/multi__appendix_compendium_of_configuration_properties.html">config properties</a></p></div>
<div class="section">
<h2><a name="TODO"></a>TODO</h2>
<p>Rate limit on /encrypt endpoint</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2018.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
